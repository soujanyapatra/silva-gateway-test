import{h as P,z as G,A as E,B as z,k as M,l as _,C as X,D,E as Y,G as O,r as B,o as t,c as p,q as i,w as r,s as A,H as m,I as Q,y as c,F as L,a as K,b as V,n as l,t as J,J as T,K as x,L as Z,M as H,N as a,d as $,v as d,j as ee,O as se,T as oe,e as ie,P as ne}from"./index-9e5cdde2.js";import{d as le}from"./dashboard-774705f3.js";import te from"./UserProfile-dea5f017.js";import{_ as re}from"./Settings.vue_vue_type_script_setup_true_lang-cb87c339.js";import{_ as ce}from"./NavBarI18n.vue_vue_type_script_setup_true_lang-fd3bec6f.js";import{a as j}from"./axios-793fe328.js";import{V as ue,a as S,b as F}from"./VList-cedbac79.js";import{V as me}from"./VMenu-5a21851f.js";import{V as pe}from"./VSpacer-4cdd19b9.js";import"./VDialog-f0d865f4.js";import"./forwardRefs-20e359e8.js";import"./dialog-transition-72f9b17b.js";const Ae="/test/assets/message-12353152.svg",fe=[{title:"sidebar.dashboard",to:{name:"dashboard"},icon:{icon:P("img",{src:le,style:"height: 20px; width: 20px;"})},accessBy:["employee","member","Acc-admin"]}],ve="/test/assets/bell-e9bdea97.svg",ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAYAAADFniADAAAABHNCSVQICAgIfAhkiAAABYhJREFUWEfNWGtsFFUU/k7XlkeL/GppK1HAQrU+oLtGxRoY+KGABWPZJQETbRSotsQA8igxxjXRUECQGIuWR9Im2hp3aSwtFf/AgFRMcNvFQOUtCCkvf5h0QVrYPebMMtt9dmbbknj+TGbuued+c853v/sgDMCsiiOPmWcT8BQIE4hpAgjjwfiTic+D6RyDj8MS2NOxv/FiskOQmQ4FBY604VmYScyzmWgOAXlm+okPM/4g4lYOUOvtv3G4s9PVa9TXEFR+0bxR6anD1hJjJQgjjAImbGe+BWDztV5af/mI69/+4vQHKsU23VHGYCcRZQ0YTExHvhwI4IOOQ+5vAATixU0IqlBxvE2MbURIGzpAwUjM6AXxe+2qu8YsqBSbYq8BaPFQg4mNx197VHdFdMZiMlWozH8nBSlf3X9AwRECCLzboe7+Ony8CFBTptlfsBCpIKSGO9mmFMA6ucA0zm7fLbT8pMLnE24bGOOOP8U/w3ugsU33DIF6WikZ+wBb2omQGR4mJzsTDTs3od691yh8qH1S3jj4fDfhrNpmqg8zbtwlv/V3tfGydAiBsin2KoDWRkeRLH20thzN+1RTA4hTbnYWcnOyULbcaboPwBs8qrsyBMo67bXHkWLpINCweKCclRVJgspETnZyoBjcQ3dokqfN9ZeWKet0+y4ieiveb0mmlpYuiPlrnWdXrt6A51gn5Klboj7GaeOdHtW9RANlm27vAlGOGVDCFyknEaAePorc7EwoLz6Lb10t2FHn1kIMFBQzutoPuh4iq1LyPMFyJNFfhA+QkTES9Ts2YnudWyPyyoo3NWAyCbZ8ugb17la07FMHDEowMPxTyaY41gPQCGaUqYX2OcjPG4eaWldoRuozTQBt3+qEUlw6KFAAqsim2H8A6FUzoD77ZLWWiVNnL2igpGThmtT8XTWWLndqJY3HQ2NOablqIqvi8BIw2QwoZ2U5fvN2hkpkm/IEwjVpKEAxcEzKdxXAGDOgpHy2yQXYXF0XypSU03fzlsanISrfNbIq9tvx9CnR9K7fuRF7flRx5twFiH4J0Zta9+Pjdcuwo86lvQ909gWJzj1JZUo6ybIjYDLSR8LjPaHxJ3/ieG0GNrhbByUJ9xIhmTLPqfASSzaETyKaQvxw8Vy2dBHmz30J3T4fukRcvSdCGmZE9nucMj/7jAJKe81Wp8a7aBPgZSucJnYO3GRKp2o+T2Zh7YMj8iDk161hdys2f1lr9G9VSSl6eDRR94Xz5+DMuYsaucXUllqNa7pFg5Lvz8xY0C8oTdHFw6Y4/gEw2kjRw9tFSGWpkXVv4eLVWlNzQ7X27Lp6Xdu+6KD0d2mTEnq8nfGBMV/xHHTn6gtyHYjeSAaUCKlkRQR00ZI16PbdhNocLE1N7fea0p8+ewFzZyka0WXGiomvfI9nzLyt/aC7IgiqyPEwp/LpRPuplRWleH3Jmog4Uj7JkgyozzxR9JwxwY2rs6oaattR7V14NSojXRNZWRvjAgL39AbuTDx+qOmS4c5TG6CyHMUvK0YEjWmXjC2yv6IBElv14aYQ/2KDRe08xSHvudkPjh6efjLRvsosouJZClYtK40gvGRIAOriGhOL+Yrvbm/+qbY93dIWeZqZUVJkCVgORJ9mzALS/UT1hWui9rp4hotrRDw5zTAr3kPuX/Tv//9zn4400ckm2YwZ+/fxKNw34V2CVbGXgemL+3WXwITyDtW1Kx7wfq+CgidmuAdL/igOXWLyL2hXG39NlEnD+6mxUx0jxqTxOgDvg6hvDTGuTaQHczcTbbjegy2DuZ+KCFpYNC+XUtNWEFAM0GPmMfFJBlrYTxs7fnb1HQ77CWCYqXh9C2eWPAJ/yjwCPQniR2PvPHGeAG/AEtg7kDvP/wBnLaEUaIlqrQAAAABJRU5ErkJggg==",ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAMAAADyQNAxAAAAAXNSR0IB2cksfwAAAUdQTFRFAAAAM0RVMkFWMkBWMj9VM0BVM0BVM0BVNEJVNEBVM0BVM0JXM0BVM0BWM0BVVVVVNEFWNEBVWmV2lZumoqiyhY2aQ09iOUVatbnB////9vf4fYWSsba+8PHyiI+c/f7+anSDVF9w5efqWWN0/f39ub3ENUFWipKe6evt2dvfxMjOUl1u9/j4cXqJZnCAdH2LXWh4lZynmaCqZW9/X2l6PEld0dTZSlZodn+N9fb3N0RYO0dc7O3vWWR1+vr78/T18vP0p622aXOC+fr6/Pz81djc5ujqe4SRc3yKgoqXW2V28fLzpaq0PkpeP0tfQk5io6myys7TzdDVNkNY2t3g5ObooaexaXKCUVxuyczSb3iH+/v8Tllr7u/xjpWhPUldfISSVmFyyMvR9PX2qK22n6WvjZSgnqSuVV9xlp2o0tXa2dzg1NfbPaTtxwAAAG10Uk5TAA9WmMXq/P82qPgjs2j3A56y/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8iKFw4AAAGXSURBVHicjZRXV8JAEIWXtCUQmoo6KmJBEQsqWBDBgr2LvTfs+v+f3WSzJEuCJ/dpzuQ7k9m7s4OQTT5BlGQFK7IkCj7kLr8awJYCqt+FCWq4UVqwEQqFHRDG4RDHRKIujK5oxAbFmkAYxyysWSWjWr2nfyCMzd6CZuMtrW3xdpcj0JNSCzo6gair24lphpk07gFI9AIk+5yYbq9qRP2k0MAg2JQaGjYpldwdvZY0jGRGxzKZcZjIUk3ClEkFfEig0TTk8jOz+fwczLMfQZZFAhJpUGB/XCg6KRFJNFgsEapMqKVlJlhZNSkJyWZUWYP1DYDNre26dmCXfpORwsqWIQV7+wd2C9g/FWTLVQ4bjKp3ZtWydYuPjqsnRFYt2YU6PTu/yBGxjMzOyFGXyavrgi0jMb846ub27v7BlhGZ9xz1WKo+6VawjMDuke/++SVh+Eoz5B7NmeApPqNa84VxLd6E8luzivFr7e2d0wd86nmNm/vi1/cPp9+0njbn3tsb8vgePb5tb3vC487xur+Qt12oq+le/QN8EFC3dzklRQAAAABJRU5ErkJggg==",_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAMAAADyQNAxAAAAAXNSR0IB2cksfwAAASxQTFRFAAAAM0RVMkFWMkBWMj9VM0BVM0BVM0BVNEJVNEBVM0BVM0JXM0BVM0BWM0BVVVVVNEFWNEBVWmV2lZumoqiyhY2aQ09iOUVatbnB////9vf4fYWSsba+/f7+anSDVF9w/f39ub3ENUFWipKe6evt2dvf9/j4cXqJZnCAdH2LXWh4lZynmaCqZW9/0dTZSlZodn+N9fb3N0RYO0dc7O3v+vr78/T18vP0p622aXOC+fr65ujqe4SRc3yKgoqXW2V2WWR18fLzpaq0PkpeP0tfQk5io6myys7TzdDVNkNY2t3g5ObooaexaXKCUVxuyczSb3iH+/v8Tllr7u/xjpWhPUldfISSVmFyyMvR8PHy9PX2qK22n6WvjZSgnqSuVV9xlp2o0tXa2dzg1NfbJ0VoowAAAGR0Uk5TAA9WmMXq/P82qPgjs2j3A56y/////////////////////////////////////////////////////////////////////////////////////////////////////////////7KPvlgAAAGDSURBVHicjZR3W8IwEMZD11EoS0WNiqI4UFERceDCjXtP3Pr9v4NNk9CmwyfvX/dcf8/18uZyCHkUU1RNN8DQNVWJoXDFzQS4SpjxECZpgV9W0g+l0gEIIJ0SmEw2hCHKZjxQLgICyLlYVCWnWqenfyAA1luSNd7V3ZPvDTkCPSm1oK8f2xoYDGKWYyaNh7CjwnAQI/aaTjSC/SqOjjHKtO+OXksJj08QTeKpMtU0nmFUIoYUGs3iyhzRPF7gP8JlHilIpUGV/2ixFqRUpNFgqc6o5RUuvLrGKA3pLGqsO9DG5lZH27hJv+nI4GV3cBHv7u17LeD/NJAn1zjwGdXpzK3l6RYOj1rHttxaegh1cnp2XrHFMzo/o0BdFC6vqp6Mxv0SqOub27t7T0bl3gvUQ731SKzgGYXfo9j90/OL4yvN2PfIZkKkxIzpzhdAOx9Bxd1ZBXhtv70L+sCfJG8Jc1/7+v4R9FsiaTb3cm9I8j1Kvm25PSG5c2T3F5LbhUSRe/UPvYFK6TdciBcAAAAASUVORK5CYII=";const Ve=h=>(H("data-v-bee8584a"),h=h(),a(),h),he=Ve(()=>l("img",{class:"mt-2",size:"26",src:ve,alt:""},null,-1)),be={key:0,class:"blink_me"},Re=["onClick"],Ne={class:"pr-2"},We={key:0,src:ge},ke={key:1,src:ye},Ce={key:2,src:_e},Se={class:"text-lg"},Be={key:0},Ue={class:"gray-sub mb-0"},Ie={key:1},Te={class:"gray-sub mb-0"},je={key:2},Fe={class:"gray-sub mb-0"},Me={key:3},xe={class:"gray-sub mb-0"},we={key:4},qe={class:"gray-sub mb-0"},Pe={__name:"Notification",setup(h){const b=E(),{notify:u}=z(store);let f=M();const N=_({}),g=_([]),W=_([]),k=_(!1),o=_({}),y=_(!1);X(()=>{clearInterval(y.value)}),D(()=>{var s,n,v;(((s=o==null?void 0:o.value)==null?void 0:s.role)=="member"||((n=o==null?void 0:o.value)==null?void 0:n.role)=="employee"||((v=o==null?void 0:o.value)==null?void 0:v.role)=="Acc-admin"&&(u==null?void 0:u.value)==!0)&&localStorage.getItem("User_id")&&I()});function R(s){return s.some(n=>!n.isRead)}const U=s=>{(s==null?void 0:s.isRead)==!1?(b.fullScreenLoad=!0,j.get(`/notification/push/read?id=${s==null?void 0:s.id}`).then(n=>{b.fullScreenLoad=!1,(s==null?void 0:s.type)=="amountAdded"||(s==null?void 0:s.type)=="amountDeducted"?f.push("/recent-transaction"):(s==null?void 0:s.type)=="requestMade"?f.push("/payment-request"):(s==null?void 0:s.type)=="newDirectMessage"&&f.push("/messagelist")}).catch(n=>{b.fullScreenLoad=!1,console.log("error occured in read notification api",n)})):(s==null?void 0:s.type)=="amountAdded"||(s==null?void 0:s.type)=="amountDeducted"?f.push("/recent-transaction"):(s==null?void 0:s.type)=="requestMade"?f.push("/payment-request"):(s==null?void 0:s.type)=="newDirectMessage"&&f.push("/messagelist")};o.value=JSON.parse(localStorage.getItem("user")),N.value=JSON.parse(localStorage.getItem("User_id"));const I=()=>{u.value===!0&&j.get(`/notification/push/user?userId=${N.value.UserSub}&all=true`).then(s=>{let n=0;W.value=s.data.data;for(let v of W.value)v.isRead==!1&&(n=n+1);n>0?k.value=!0:k.value=!1,g.value=s.data.data.slice(0,5)}).catch(s=>{console.log("notification error:",s)})};function w(){var s,n,v;(((s=o==null?void 0:o.value)==null?void 0:s.role)=="member"||((n=o==null?void 0:o.value)==null?void 0:n.role)=="employee"||((v=o==null?void 0:o.value)==null?void 0:v.role)=="Acc-admin"&&(u==null?void 0:u.value)==!0)&&(y.value=setInterval(()=>{localStorage.getItem("User_id")&&I()},5e3))}return Y(u,async(s,n)=>{u.value==!1?clearInterval(y.value):(clearInterval(y.value),w())},{immediate:!0}),O(()=>g.value.filter(s=>!s.isRead)),(s,n)=>{const v=B("Iconbtn");return t(),p("section",null,[i(v,{class:"alarm-container"},{default:r(()=>[he,A(g).length>0&&A(u)&&R(A(g))?(t(),p("div",be)):m("",!0)]),_:1}),i(me,{activator:"parent",width:"300",location:"bottom end",offset:"14px"},{default:r(()=>[i(ue,{class:"vlist notifis-list"},{default:r(()=>[i(S,{height:"50",class:"py-3 m-0 px-4 notification"},{default:r(()=>[i(F,null,{default:r(()=>[Q(c(s.$t("Notifications")),1)]),_:1})]),_:1}),(t(!0),p(L,null,K(A(g),(e,q)=>(t(),V(S,{class:"notification-value",key:q},{default:r(()=>[l("div",{onClick:C=>U(e),class:J(["d-flex py-3 px-4 cursor-pointer items-start notification-container",(e==null?void 0:e.isRead)==!1?"unread-notification":""])},[l("div",Ne,[(e==null?void 0:e.type)=="requestMade"?(t(),p("img",We)):m("",!0),(e==null?void 0:e.type)=="amountAdded"||(e==null?void 0:e.type)=="referralSubscription"||(e==null?void 0:e.type)=="referralTransaction"?(t(),p("img",ke)):m("",!0),(e==null?void 0:e.type)=="amountDeducted"||(e==null?void 0:e.type)=="scheduledOrRecurringNotification"?(t(),p("img",Ce)):m("",!0),(e==null?void 0:e.type)=="newDirectMessage"?(t(),V(T,{key:3,color:"primary",class:"notification-avatar"},{default:r(()=>{var C;return[l("span",Se,c((C=e==null?void 0:e.fromUser)==null?void 0:C.name.substr(0,1)),1)]}),_:2},1024)):m("",!0),(e==null?void 0:e.type)=="transactionFailed"||(e==null?void 0:e.type)=="recurringTransactionFailed"||(e==null?void 0:e.type)=="transactionRemainder"?(t(),V(T,{key:4,color:"primary",class:"notification-avatar"},{default:r(()=>[i(x,{icon:"tabler-x"})]),_:1})):m("",!0)]),(e==null?void 0:e.type)=="amountAdded"?(t(),p("div",Be,[l("span",null,c(e==null?void 0:e.title),1),l("p",Ue,c(e.message),1)])):m("",!0),(e==null?void 0:e.type)=="amountDeducted"?(t(),p("div",Ie,[l("span",null,c(e==null?void 0:e.title),1),l("p",Te,c(e==null?void 0:e.message),1)])):m("",!0),(e==null?void 0:e.type)=="requestMade"?(t(),p("div",je,[l("span",null,c(e==null?void 0:e.title),1),l("p",Fe,c(e==null?void 0:e.message),1)])):m("",!0),(e==null?void 0:e.type)=="newDirectMessage"?(t(),p("div",Me,[l("span",null,c(e==null?void 0:e.title),1),l("p",xe,c(e==null?void 0:e.message),1)])):m("",!0),(e==null?void 0:e.type)=="referralSubscription"||(e==null?void 0:e.type)=="referralTransaction"||(e==null?void 0:e.type)=="scheduledOrRecurringNotification"||(e==null?void 0:e.type)=="transactionFailed"||(e==null?void 0:e.type)=="recurringTransactionFailed"||(e==null?void 0:e.type)=="transactionRemainder"?(t(),p("div",we,[l("span",null,c(e==null?void 0:e.title),1),l("p",qe,c(e==null?void 0:e.message),1)])):m("",!0)],10,Re)]),_:2},1024))),128)),i(Z),i(S,{class:"view-all-notification text-center",onClick:n[0]||(n[0]=()=>{A(f).push("notification-details")})},{default:r(()=>[i(F,null,{default:r(()=>[l("div",null,[l("span",null,c(s.$t("View_All_Notifications")),1)])]),_:1})]),_:1})]),_:1})]),_:1})])}}},Ge=G(Pe,[["__scopeId","data-v-bee8584a"]]),Ee={class:"d-flex h-100 align-center"},ze=l("img",{size:"26",src:Ae,alt:""},null,-1),de=$({__name:"DefaultLayoutWithVerticalNav",setup(h){const{appRouteTransition:b,isLessThanOverlayNavBreakpoint:u}=d(),{width:f}=ee();se();const N=M(),g=()=>{N.push({name:"messagelist"})};return(W,k)=>{const o=B("IconBtn"),y=B("RouterView");return t(),V(A(ne),{"nav-items":A(fe)},{navbar:r(({toggleVerticalOverlayNavActive:R})=>[l("div",Ee,[A(u)(A(f))?(t(),V(o,{key:0,id:"vertical-nav-toggle-btn",class:"ms-n3",onClick:U=>R(!0)},{default:r(()=>[i(x,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"])):m("",!0),i(pe),i(re),i(o,{onClick:g},{default:r(()=>[ze]),_:1}),i(o,null,{default:r(()=>[i(Ge)]),_:1}),i(ce,{class:"me-1"}),i(te)])]),default:r(()=>[i(y,null,{default:r(({Component:R})=>[i(oe,{name:A(b),mode:"out-in"},{default:r(()=>[(t(),V(ie(R)))]),_:2},1032,["name"])]),_:1})]),_:1},8,["nav-items"])}}});export{de as default};
